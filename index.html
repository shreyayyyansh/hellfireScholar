<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hellfire Scholar</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="iconTab.jpg">
</head>
<body>
    <!-- login-->
    <div id="authScreen" class="auth-screen">
        <div class="auth-card">
            <div class="auth-header">
                <div class="auth-icon"><img src="H.png" class="H"></div>
                <h1 class="auth-title">Hellfire Scholar</h1>
                <p class="auth-subtitle">Sickest Academic Aid</p>
            </div>

            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthMode('login')">Login</button>
                <button class="auth-tab" onclick="switchAuthMode('register')">Register</button>
            </div>

            <div id="registerFields" style="display: none;">
                <input type="text" id="registerName" placeholder="Full Name" class="input-group">
                <label class="input-label">Course</label>
                <select id="registerCourse" class="input-group">
                    <option value="">Select your course</option>
                    <option value="Computer Science Engineering">Computer Science Engineering</option>
                    <option value="Electronics and Communication Engineering">Electronics and Communication Engineering</option>
                    <option value="Electrical Engineering">Electrical Engineering</option>
                    <option value="Information Technology">Information Technology</option>
                    <option value="Mechanical Engineering">Mechanical Engineering</option>
                    <option value="Civil Engineering">Civil Engineering</option>
                </select>
            </div>

            <input type="email" id="authEmail" placeholder="Email" class="input-group">
            <input type="password" id="authPassword" placeholder="Password" class="input-group">
            <button class="btn-primary" onclick="handleAuth()">
                <span id="authButtonText">Login</span>
            </button>
        </div>
    </div>

    <div id="appScreen" class="app-screen">
        <!-- Header -->
        <header>
            <div class="header-content">
                <div class="header-logo">
                    <span>Hellfire Scholar</span>
                </div>
                <div class="header-user">
                    <div class="user-info">
                        <span class="user-name" id="userName"></span>
                    </div>
                    <button class="btn-logout" onclick="logout()">Logout</button>
                </div>
            </div>
        </header>
        <div class="app-container">
            <!--side-->
            <aside class="sidebar">
                <nav>
                    <div class="nav-item active" onclick="switchTab('dashboard')">
                         <span>Dashboard</span>
                    </div>
                    <div class="nav-item" onclick="switchTab('notes')">
                         <span>Notes & Resources</span>
                    </div>
                    <div class="nav-item" onclick="switchTab('syllabus')">
                         <span>Syllabus</span>
                    </div>
                    <div class="nav-item" onclick="switchTab('assignments')">
                         <span>Assignments</span>
                    </div>
                    <div class="nav-item" onclick="switchTab('attendance')">
                         <span>Attendance</span>
                    </div>
                    <div class="nav-item" onclick="showSection('resources')">Resources(coming soon)</div>
                </nav>
            </aside>
            <main class="main-content">
                <div id="dashboard" class="content-section active">
                    <h2 class="section-title">Dashboard</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-content">
                                <div>
                                    <div class="stat-label">Total Notes</div>
                                    <div class="stat-value" style="color: #f97316;" id="totalNotes">0</div>
                                </div>
                                <img src="Notes.png" class="stat-icon-img">
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-content">
                                <div>
                                    <div class="stat-label">Pending Tasks</div>
                                    <div class="stat-value" style="color: #dc2626;" id="pendingTasks">0</div>
                                </div>
                                <img src="Tasks.png" class="stat-icon-img">
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-content">
                                <div>
                                    <div class="stat-label">Avg Attendance</div>
                                    <div class="stat-value" style="color: #10b981;" id="avgAttendance">--</div>
                                </div>
                                <img src="Attendance.png" class="stat-icon-img">
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-content">
                                <div>
                                    <div class="stat-label">Subjects</div>
                                   <div class="stat-value" style="color: #3b82f6;" id="subjectCount">0</div>
                                </div>
                                <img src="Subjects.png" class="stat-icon-img">
                            </div>
                        </div>
                    </div>

                    <div class="card alerts-card">
                        <div class="alerts-header">
                            <div>
                                <h3 class="card-title">Alerts &amp; Focus</h3>
                                <p class="alerts-subtitle">Quick snapshot of what needs your attention.</p>
                            </div>
                            <div class="alerts-status-pill" id="alertsOverallStatus">All clear</div>
                        </div>

                        <div class="alerts-grid">
                            <section class="alert-section">
                                <div class="alert-section-header">
                                    <div class="alert-icon"><img src="Alert.png" class="alert-icon-img"></div>
                                    <div>
                                        <h4 class="alert-section-title">Attendance Alerts</h4>
                                        <p class="alert-section-caption">Subjects meeting or missing attendance requirements.</p>
                                    </div>
                                </div>
                                <div id="attendanceAlerts" class="alert-panel"></div>
                            </section>

                            <section class="alert-section">
                                <div class="alert-section-header">
                                    <div class="alert-icon"><img src="Alert.png" class="alert-icon-img"></div>
                                    <div>
                                        <h4 class="alert-section-title">Task Alerts</h4>
                                        <p class="alert-section-caption">Upcoming deadlines and pending tasks.</p>
                                    </div>
                                </div>
                                <div id="taskAlerts" class="alert-panel"></div>
                            </section>

                            <section class="alert-section">
                                <div class="alert-section-header">
                                    <div class="alert-icon"><img src="Alert.png" class="alert-icon-img"></div>
                                    <div>
                                        <h4 class="alert-section-title">Alerts &amp; Reminders</h4>
                                        <p class="alert-section-caption">Important reminders you have set.</p>
                                    </div>
                                </div>
                                <div id="reminderAlerts" class="alert-panel"></div>
                            </section>

                            <section class="alert-section">
                                <div class="alert-section-header">
                                    <div class="alert-icon"><img src="Alert.png" class="alert-icon-img"></div>
                                    <div class="today-focus-header">
                                        <h4 class="alert-section-title">Today&apos;s Focus</h4>
                                        <p class="alert-section-caption">What you should prioritise today.</p>
                                    </div>
                                    <button id="todayFocusBtn"
                                            class="btn-small today-focus-btn"
                                            onclick="showTodayFocus()">
                                        Show Today
                                    </button>
                                </div>
                                <div id="todayFocus" class="alert-panel"></div>
                            </section>
                        </div>
                    </div>

                </div>

                <!-- Notes -->
                <div id="notes" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">Notes & Resources</h2>
                        <button class="btn-add" onclick="openModal('uploadNote')">
                            <span>➕</span>
                            <span>Upload</span>
                        </button>
                    </div>
                    
                    <div class="subject-filter">
                        <label class="input-label">Filter by Subject:</label>
                        <select id="notesFilter" class="filter-select" onchange="fetchAndRenderNotes()">
                            <option value="all">All Subjects</option>
                        </select>
                    </div>
                    
                    <div id="notesGrid" class="grid"></div>
                </div>

                <div id="syllabus" class="content-section">
                 <div class="section-header">
    <h2 class="section-title">Syllabus Progress</h2>
    <div class="subject-selector">
        <label class="input-label">Select Subject:</label>
        <select id="syllabusSubjectSelect" class="filter-select" onchange="renderSyllabus()">
            <option value="">Select Subject</option>
        </select>
    </div>
    <div style="display:flex; gap:8px;">
        <button class="btn-add" onclick="openSubjectManager()">
            <span>⚙️</span>
            <span>Manage Subjects</span>
        </button>
        <button class="btn-add" onclick="addCustomSubject()">
            <span>+</span>
            <span>Custom Subject</span>
        </button>
    </div>
</div>
                    <div id="syllabusContainer"></div>
                </div>

                <!-- Assignments -->
                <div id="assignments" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">Assignments & Quizzes</h2>
                        <button class="btn-add" onclick="openModal('addAssignment')">
                            <span>➕</span>
                            <span>Add Assignment</span>
                        </button>
                    </div><div class="assignment-filters">
    <label class="input-label">Filter:</label>
    <select id="assignmentFilter" class="filter-select" onchange="renderAssignments()">
        <option value="all">All</option>
        <option value="pending">Pending</option>
        <option value="due-today">Due Today</option>
        <option value="overdue">Overdue</option>
    </select>
</div>

<div id="assignmentsContainer"></div>
                </div>

                <!-- Attendance -->
                <div id="attendance" class="content-section">
                    <h2 class="section-title">Attendance Tracker</h2>
                    <div id="attendanceContainer"></div>
                </div>
            </main>
        </div>
    </div>

    <div id="uploadNoteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Upload Resource</h3>
                <button class="btn-close" onclick="closeModal('uploadNote')">×</button>
            </div>
            <input type="text" id="noteTitle" placeholder="Title" class="input-group">
            
            <label class="input-label">Subject</label>
            <select id="noteSubject" class="input-group">
                <option value="">Select Subject</option>
            </select>
            
            <label class="input-label">Category</label>
            <select id="noteCategory" class="input-group">
                <option value="notes">Notes</option>
                <option value="pyq">Previous Year Questions</option>
                <option value="resource">Study Material</option>
            </select>
            
            <input type="file" id="noteFile" class="input-group">
            <button class="btn-primary" onclick="uploadNoteBackend()">Upload</button>
        </div>
    </div>

    <div id="addAssignmentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Assignment</h3>
                <button class="btn-close" onclick="closeModal('addAssignment')">×</button>
            </div>
            <input type="text" id="assignmentTitle" placeholder="Assignment Title" class="input-group">
            
            <label class="input-label">Subject</label>
            <select id="assignmentSubject" class="input-group">
                <option value="">Select Subject</option>
            </select>
            
            <label class="input-label">Deadline</label>
            <input type="date" id="assignmentDeadline" class="input-group">
            
            <label class="input-label">Status</label>
            <select id="assignmentStatus" class="input-group">
                <option value="pending">Pending</option>
                <option value="submitted">Submitted</option>
                <option value="graded">Graded</option>
            </select>
            
            <div id="marksField" style="display: none;">
                <label class="input-label">Marks Obtained</label>
                <input type="number" id="assignmentMarks" placeholder="Marks" class="input-group" min="0" max="100">
            </div>
            <button class="btn-primary" onclick="addAssignment()">Add Assignment</button>
        </div>
    </div>

    <div id="manageSubjectsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Manage Subjects</h3>
                <button class="btn-close" onclick="closeManageSubjectsModal()">×</button>
            </div>
            <p class="input-label" id="manageSubjectsCourseLabel"></p>
            <div id="manageSubjectsList" style="display:flex; flex-direction:column; gap:8px; margin-top:8px;"></div>
            <div style="display:flex; justify-content:flex-end; gap:8px; margin-top:16px;">
                <button class="btn-cancel" onclick="closeManageSubjectsModal()">Cancel</button>
                <button class="btn-save" onclick="saveManageSubjects()">Save</button>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>